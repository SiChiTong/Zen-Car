<p id="notice"><%= notice %></p>

<h1>Cars</h1>


<%= form_tag cars_path, method: :get do %>
    <%= text_field_tag :location, params[:location], placeholder: "Location" %>
    <%= text_field_tag :manufacturer, params[:manufacturer], placeholder: "Manufacturer" %>
    <%= text_field_tag :model, params[:model] , placeholder:"Model"%>
    <%= select_tag :style, options_for_select(Car::STYLE), prompt: "Style" %>
    <%= select_tag :status, options_for_select(Car::STATUS),include_blank:"Status" %>
    <%= submit_tag "Search", name: nil %>
<% end %>
</br>
<% if @cars.blank? %>
    <h4>There are no cars containing your filter criteria</h4>
<% else%>

    <table>
      <thead>
      <tr>
        <th>License no</th>
        <th>Manufacturer</th>
        <th>Hourly rate</th>
        <th>Model</th>
        <th>Location</th>
        <th>Style</th>
        <th>Status</th>
        <th colspan="4"></th>
      </tr>
      </thead>

      <tbody>
      <% @cars.each do |car| %>
          <tr>
            <td><%= car.license_no %></td>
            <td><%= car.manufacturer %></td>
            <td><%= car.hourly_rate %></td>
            <td><%= car.model %></td>
            <td><%= car.location %></td>
            <td><%= car.style%></td>
            <td><%= car.status%></td>
            <td><%= link_to 'Reserve', customers_path%></td>
            <% if current_customer.admin? %>
              <td><%= link_to 'Show', car %></td>
              <td><%= link_to 'Edit', edit_car_path(car) %></td>
              <td><%= link_to 'Destroy', car, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

<br>

<% if current_customer.admin? %>
  <%= link_to 'New Car', new_car_path %>
<% end %>
<%= link_to 'Back', customers_path%>
